# ViaVDS ‚Äî Open Source Webhook Proxy & Buffer

`viavds` ‚Äî —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏ –æ—Ç–∫—Ä—ã—Ç—ã–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª—é–±—ã–µ HTTP(S) –∑–∞–ø—Ä–æ—Å—ã (–≤–µ–±—Ö—É–∫–∏), —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Ö –≤ –æ—á–µ—Ä–µ–¥—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–∞–ª—å—à–µ –∏–ª–∏ –æ—Ç–≤–µ—á–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏.

–ü–æ–¥–æ–π–¥—ë—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä–æ–≤, —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤ –∏ –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–µ–Ω:

- –Ω–∞–¥—ë–∂–Ω—ã–π –ø—Ä–∏–µ–º—â–∏–∫ –≤–µ–±—Ö—É–∫–æ–≤ (–¥–∞–∂–µ –µ—Å–ª–∏ –≤–∞—à —Å–µ—Ä–≤–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- –≥–∏–±–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –æ—á–µ—Ä–µ–¥—å –¥–æ—Å—Ç–∞–≤–∫–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–≤—Ç–æ—Ä–∞–º–∏
- ngrok-–ø–æ–¥–æ–±–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Cloudflare Tunnel
- —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

–°–µ—Ä–≤–∏—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π. –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–∞ VPS –∏–ª–∏ –≤ –æ–±–ª–∞–∫–µ.

---

# ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü—Ä–∏—ë–º *–ª—é–±—ã—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤* –Ω–∞ –ª—é–±—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (`GET/POST/PUT/...`)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å:
    - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
    - backoff (–∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏)
    - Dead-Letter Queue
- –ü—Ä–∞–≤–∏–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:
    - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å –¥–∞–ª—å—à–µ
    - –æ—Ç–≤–µ—Ç–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏
    - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å
    - –æ—Ç–±—Ä–æ—Å–∏—Ç—å –∑–∞–ø—Ä–æ—Å
- Web UI / Admin API (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- –ü–æ–ª–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Cloudflare Tunnel (ngrok-–ø–æ–¥–æ–±–Ω—ã–π)
- –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ mkcert

---

# üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (VDS –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä Linux)

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω—ã –∏–ª–∏ –ø–æ–¥–¥–æ–º–µ–Ω—ã (–ø—Ä–∏–º–µ—Ä):


wh.example.com A ‚Üí <–≤–∞—à —Å–µ—Ä–≤–µ—Ä>  
ngrok.example.com A ‚Üí <–≤–∞—à —Å–µ—Ä–≤–µ—Ä>

````
2) –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä:

```bash
curl -sSL "https://raw.githubusercontent.com/e-bash/viavds/master/install/install_viavds.sh" \
  | sudo bash -s -- \
    --wh wh.example.com \
    --ngrok ngrok.example.com \
    --email admin@example.com \
    --postgres-password VeryStrongPass
````

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Cloudflare –∏ —Ö–æ—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ ‚Äî –¥–æ–±–∞–≤—å—Ç–µ:

```
--cf-token CLOUDFLARE_DNS_API_TOKEN
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∏–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä

- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker –∏ docker compose

- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç nginx –∏ certbot

- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç cloudflared

- –ö–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

- –°–æ–∑–¥–∞—ë—Ç `.env`

- –°–æ–∑–¥–∞—ë—Ç –∫–æ–Ω—Ñ–∏–≥–∏ nginx

- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç SSL

- –ó–∞–ø—É—Å–∫–∞–µ—Ç `docker compose up -d`


---

# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloudflare Tunnel (ngrok-like)

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```bash
sudo su - deploy
cloudflared tunnel login
cloudflared tunnel create main-vds
cloudflared tunnel route dns main-vds ngrok.example.com
sudo systemctl enable --now cloudflared-tunnel.service
```

–¢–µ–ø–µ—Ä—å:

```
ngrok.example.com ‚Üí –≤–∞—à tunnel ‚Üí –≤–∞—à —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –¥–∞–∂–µ –≤–∞—à—É –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É
```

---

# üß† –ü—Ä–∏–º–µ—Ä: –º–Ω–æ–≥–æ-—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ù–ï –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–ª–æ—â–∞–¥–æ–∫:

```
wh.nl.myproject.com
ngrok.nl.myproject.com

wh.us.myproject.com
ngrok.us.myproject.com
```

–¢–æ –≤—ã –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ —Ç—É –∂–µ –∫–æ–º–∞–Ω–¥—É –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –º–µ–Ω—è—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `--wh` –∏ `--ngrok`.

---

# üíª –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (macOS / Windows / Linux)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ mkcert

macOS:

```bash
brew install mkcert
mkcert -install
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:

```bash
mkcert wh.localhost
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π nginx:

```nginx
server {
    listen 443 ssl;
    server_name wh.localhost;

    ssl_certificate /path/wh.localhost.pem;
    ssl_certificate_key /path/wh.localhost-key.pem;

    location / {
        proxy_pass http://127.0.0.1:14127;
    }
}
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:

```bash
docker compose up -d
```

–ì–æ—Ç–æ–≤–æ ‚Äî —É –≤–∞—Å HTTPS-–ø—Ä–æ–∫—Å–∏ –ª–æ–∫–∞–ª—å–Ω–æ.

---

# üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
viavds/
 ‚îú‚îÄ‚îÄ src/
 ‚îú‚îÄ‚îÄ install/
 ‚îÇ    ‚îî‚îÄ‚îÄ install_viavds.sh       # –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä
 ‚îú‚îÄ‚îÄ docker-compose.yml
 ‚îú‚îÄ‚îÄ Dockerfile
 ‚îú‚îÄ‚îÄ .env.example
 ‚îî‚îÄ‚îÄ README.md
```

---

# ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ ENV-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```env
NODE_ENV=production
PORT=14127
HOST=0.0.0.0

DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_NAME=viavds
DATABASE_USER=viavds
DATABASE_PASS=YOUR_PASSWORD

WORKER_BATCH_SIZE=20
WORKER_LOOP_DELAY_MS=500
WORKER_MAX_ATTEMPTS=5
WORKER_BACKOFF_MS=2000

RETENTION_DAYS=30
CLEANUP_INTERVAL_MINUTES=1440

BASIC_AUTH_USER=admin
BASIC_AUTH_PASS=ChangeMe
HMAC_SECRET=SuperSecret

MAX_PAYLOAD_SIZE=5242880

CLOUDFLARE_TUNNEL_NAME=main-vds
LOG_LEVEL=info
```

---

# üß∞ –ó–∞–ø—É—Å–∫ –≤ Docker –≤—Ä—É—á–Ω—É—é

```bash
docker compose build
docker compose up -d
docker compose logs -f viavds
```

---

# üõ† –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:

```bash
docker compose down
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å:

```bash
docker compose up -d --build
```

–õ–æ–≥–∏:

```bash
docker compose logs -f viavds
```

---

# üìù –†–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–í –ø–ª–∞–Ω–∞—Ö:

- Web UI

- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

- –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –ü–ª–∞–≥–∏–Ω-—Å–∏—Å—Ç–µ–º–∞

- –ù–∞–±–æ—Ä—ã –≥–æ—Ç–æ–≤—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

- API-–∫–ª—é—á–∏ –∏ ACL

- –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –æ—á–µ—Ä–µ–¥—å


---

# ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

Pull Requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ issue.

---

# üì¨ –ö–æ–Ω—Ç–∞–∫—Ç—ã

Email: [ops@viavds.com](mailto:ops@viavds.com)  
Telegram:


---
---

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ viavds

```bash
curl -sSL https://raw.githubusercontent.com/e-bash/viavds/master/install/viavds.sh -o viavds.sh
chmod +x viavds.sh
sudo ./viavds.sh
```